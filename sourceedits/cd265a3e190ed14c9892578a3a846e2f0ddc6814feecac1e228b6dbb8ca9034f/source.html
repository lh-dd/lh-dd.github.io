
<!DOCTYPE html>
<html lang="en">
<title>Contact | LH-DEV</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="LH-DEV">
<link rel="canonical" href="http://45.14.148.159:4000/contact/">

<link rel="stylesheet" href="/assets/css/index.css">

<link rel="stylesheet" href="/assets/css/classes.css">
<link rel="alternate" href="/feed.xml" type="application/atom+xml" title="LH-DEV">







<header>
  <a href="/" class="title">LH-DEV</a>
  <nav><a aria-label="Buy" href="/" ><span aria-hidden="true">Buy</span></a><a aria-label="Tools" href="/tools/" ><span aria-hidden="true">Tools</span></a><a aria-label="Setup Guide" href="/setupguide/" ><span aria-hidden="true">Setup Guide</span></a><a aria-label="Test Server" href="/testserver/" ><span aria-hidden="true">Test Server</span></a><a aria-label="Source Edits" href="/sourceedits/" ><span aria-hidden="true">Source Edits</span></a><a aria-label="Contact" href="/contact/" class="selected"><span aria-hidden="true">Contact</span></a></nav>

</header>

<article>
  <header><h1><a href="/contact/">Contact</a></h1></header>
  
<div>
<p><strong>Server compile:</strong></p>
<pre><code>
Install the following to C: (they can be found in "lh-dev.net_redist.rar")

Visual Studio 2010
boost_1_61_0-msvc-10.0-32.exe
mysql-5.5.38-win32.msi

Extract the client, server and library source code from "lh-dev.net_client-server-compile.rar" to:

C:\lhserver_libs
C:\lhserver_source
C:\lhclient_source

First we need to compile the libraries for include.

With Visual studio 2010 open C:\lhserver_libs\jsoncpp-src-0.6.0-rc2\jsoncpp-src-0.6.0-rc2\makefiles\vs71\lib_json.vcxproj

At the top click Build &gt; Build Solution

Next, with Visual studio 2010 open C:\lhserver_libs\log4cxx_vs2010\log4cxx_vs2010\apache-log4cxx-0.10.0\projects\log4cxx.vcxproj

At the top click Build &gt; Build Solution

Next we can compile the server. With Visual studio 2010 open and build the following, make sure to compile Util first.

C:\lhserver_source\Util\Util.vcxproj

C:\lhserver_source\PacketSniffing\PacketSniffing.vcxproj

C:\lhserver_source\new_messenger\new_messenger.vcxproj

C:\lhserver_source\Helper\Helper.vcxproj

C:\lhserver_source\Connect\Connect.vcxproj

C:\lhserver_source\Laghaim\Laghaim.vcxproj

Compiled server executables can be found in C:\Laghaimresult\ ready to move to the servers /bin/ folder.
</code></pre>
<p><strong>Client compile:</strong></p>
<pre><code>With Visual studio 2010 open C:\lhclient_source\dev\Laghaim_Client\Laghaim_2010.vcxproj

At the top click Build &gt; Build Solution

Compiled client executable can be found in C:\lhclient_source\dev\Laghaim_Client\bin
Rename KP_Release_Game.exe to Game.exe and replace in Clean_Client folder.
</code></pre>
<p><strong>Video compile guide:</strong></p>
<figure>
<div><iframe title="lh-dev.net Client &amp; Server compile." src="https://www.youtube.com/embed/hRtOMf3n4NE?feature=oembed" width="640" height="360" frameborder="0" allowfullscreen="allowfullscreen"></iframe></div>
</figure>
<p><strong>Launcher compile:</strong></p>
<pre><code>Extract the launcher source folder from "lh-dev.net_launcher_source.rar" to:

C:/launcher_source

With Visual Studio 2010 open C:\launcher_source\LH_Launcher_KR\Laghaim.vcxproj

Set the webserver address for update in the UrlFile.h source.

#	define LH_CONNECT_URL			"https://www.website.com/update3/"
#	define LH_INFO_URL			"https://www.website.com/update3/launcher/"

At the top click Build &gt; Build Solution

Compiled launcher excutable can be found in C:\launcher_source\bin\

Rename Laghaim2011_KR.exe to Launcher.exe and place inside client folder.</code></pre>
<p><strong>Optional source code edits:</strong></p>
<p><strong>Client:</strong></p>
<p>Enable launching Game.exe directly without using a launcher.</p>
<pre><code>/*if (strlen(strCmdLine) <= 0)
	{
		MessageBox(NULL, "This Program Cannot Be Excuted Solely", "Error!!!", MB_OK);
		return 0;
	}*/</code></pre>
<p>Update server version number to block old game.exe from connecting.</p>
<pre><code>Config.h Line 18

#define PACKET_VER	3004	// Change 3004 to a different value

You will also need to edit the "CLIENT_VERSION" value to match in the servers /config/config.json</code></pre>
<p>Edit the value required for the GM file config.ini2</p>
<pre><code>main.cpp Line 4195

		if (res == 15)	// Change 15 to a different value

You can also disable the config.ini2 file and use a seperate .exe for a GM User.

main.cpp Line 4195

Replace

		if (res == 15)
		{
			g_dev_client = true;
			g_bAdmin = TRUE;
		}

With

		if (res == 15)
		{
			g_bAdmin = FALSE;
		}</code></pre>
<p>Add Custom Map S4</p>
<p>Add S3 and S4 to start zone warp list</p>
<p><strong>Client:</strong></p>
<pre><code>
	ControlGate.cpp 
	
	+ #Line 104
	
		else if (nCurWorldNum == WORLD_START)
		{
			m_GateList->AddString(G_STRING(IDS_GATE_LOST_REALM)); // 0

			if(CheckUpdateVersionID(IDS_GATE_SHAILON))
				m_GateList->AddString(G_STRING(IDS_GATE_SHAILON));		// 3

			if(CheckUpdateVersionID(IDS_MAP_PHAROS))
				m_GateList->AddString(G_STRING(IDS_MAP_PHAROS));  //6

			if(CheckUpdateVersionID(IDS_GATE_WHITEHORN))
				m_GateList->AddString(G_STRING(IDS_GATE_WHITEHORN)); // 7
			
			if(CheckUpdateVersionID(IDS_LHSTRING1896))
				m_GateList->AddString(G_STRING(IDS_LHSTRING1896));	// Added S3 to Start Zone warp

			if(CheckUpdateVersionID(IDS_LHSTRING1897))
				m_GateList->AddString(G_STRING(IDS_LHSTRING1897));	// Added S4 to Start Zone warp
		}
		
	+ #Line 856
	
		else if (pCMyApp->m_nCurWorldIdx == WORLD_START)
		{
			if(sel == 0) //샤일론 필드
				pCMyApp->m_pUIMgr->PrepareChangeWorld(TRUE, WORLD_FIELD, sel);
			else if(sel == 1) //샤일론 필드
				pCMyApp->m_pUIMgr->PrepareChangeWorld(TRUE, WORLD_GUILD, 0);
			else if(sel == 2)	// 천공의성
				pCMyApp->m_pUIMgr->PrepareChangeWorld(TRUE, WORLD_SKY, 0);
			else if( sel == 3 )	// Great white horn
				pCMyApp->m_pUIMgr->PrepareChangeWorld(TRUE, WORLD_WHITEHORN, 0);
			else if( sel == 4 )	// Added S3 to Start zone warp
				pCMyApp->m_pUIMgr->PrepareChangeWorld(TRUE, WORLD_FORLORN_S3, 0);
			else if( sel == 5 )	// Added S4 to Start zone warp
				pCMyApp->m_pUIMgr->PrepareChangeWorld(TRUE, WORLD_FORLORN_S4, 0);

		}
</code></pre>
<p><strong>Server:</strong></p>
<pre><code>
	laghaim/config.h 
	
	+ #Line 831
	
		#define ZONE24_RePlay_X				12330,12350		// Added S4 spawn location
		#define ZONE24_RePlay_Z				5027,5050		// Added S4 spawn location
		
	laghaim/DBProcess_ConMenu.cpp
	
	+ #Line 1074
	
		case ZONE_24:		// Added S4 spawn location
			{
				GET_X(pChar) = GetRandom( ZONE24_RePlay_X );
				GET_Z(pChar) = GetRandom( ZONE24_RePlay_Z );
			}
			break;
			
	laghaim/World.cpp
	
	+ #Line 184
	
		else if( a_WorldNum == ZONE_24)	// Change FORLORN_ZONE03_ATT to FORLORN_ZONE04_ATT
		{
			nprintf(DataFileName, sizeof(DataFileName) - 1, "%s%s", a_ServerPath, FORLORN_ZONE04_ATT_DATA_FILE);
		}
	
	+ #Line 7361
	
		case ZONE_23:
			GET_X(ch) = GetRandom( ZONE23_RePlay_X );
			GET_Z(ch) = GetRandom( ZONE23_RePlay_Z);
			break;
	
		case ZONE_24:		// Added S4 Spawn location
			GET_X(ch) = GetRandom( ZONE24_RePlay_X );
			GET_Z(ch) = GetRandom( ZONE24_RePlay_Z);
			break;
		}
	
	laghaim/Zone.cpp
	
	+ #Line 82
	
		if (a_WorldNum == ZONE_DISPOSAL_PLANT)
		{
			m_ZoneNpc[index].m_PosZ = z * 10;
		}
		if (a_WorldNum == ZONE_24)	// S4 set map size for npc spawn
		{
			m_ZoneNpc[index].m_PosZ = (WORLD_ATT_SIZE - z) * 10;
		}
	
	laghaim/cmd.cpp
	
	+ #Line 13542
	
		case ZONE_23:
		case ZONE_24:	// Added case for S4
		
	laghaim/LagHaim.cpp
	
	+ #Line 248
	
		a_WorldNum == ZONE_22			|| a_WorldNum == ZONE_23		|| a_WorldNum == ZONE_24	// Added S4 npc minimap compass</code></pre>
		
<p><strong>Linux Optional Changes:</strong></p>
<p><strong>Server:</strong></p>
<p>The server monitoring uses more memory than the gameserver itself, we can disable it and instead schedule a cron job to automatically restart the server daily.</p>
<pre><code>
crontab to restart server daily.
	1 22 *  *  *     cd /home/laghaim && ./serverrestart.sh > /dev/null 2>&1
	
Edit serverrestart.sh

Change sleep to 10

Change ch0_start.sh to ch0_start_no_gdb.sh

Create ch0_start_no_gdb.sh in the laghaim folder and use this format for each zone:

nohup ./LhDebug  1 7 660 whitehorn_ch0 1> /dev/null 2>&1 &
nohup ./LhDebug  1 8 660 white_dungeon_ch0 1> /dev/null 2>&1 &
nohup ./LhDebug  1 4 660 start_ch0 1> /dev/null 2>&1 &
	</code></pre>
</div>

</article>



<footer>
  <div>LH-DEV</div>
  <nav><a aria-label="Mail" href="/contact/" class="selected"><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#envelope"></use></svg></a><a aria-label="Subscribe" href="/feed.xml" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#rss"></use></svg></a></nav>

</footer>


</html>


